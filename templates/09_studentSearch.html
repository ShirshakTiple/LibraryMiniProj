<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous">

    <link rel = "stylesheet" href = "../static/09_studentSearch.css">
    <title>Document</title>
</head>
<body class = "animate-in">
    
    <nav class="navbar fixed-top navbar-dark bg-dark navbar-expand-lg ">
        <div class="container-fluid">
          <!-- <a class="navbar-brand" href="#">Home</a> -->
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
          </button>
          <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
            <div class="navbar-nav">
              <a class="nav-link active" aria-current="page" href="/">Home</a>
              <!-- <a class="nav-link" href="#">About Project</a> -->
              <a class="nav-link" href="/">Previous Page</a>
              <a class="nav-link" href="https://www.coep.org.in/">COEP</a>
              <!-- <a class="nav-link disabled">Disabled</a> -->
            </div>
          </div>
        </div>
      </nav>
    <div class="display-6">List of Books</div>

    <div class="input-group mb-3 searchBar">
      <input type="text" class="form-control" placeholder="Search book" id="search-input">
      <button class="btn btn-outline-secondary" type="button" id="search-button">Search</button>
    </div>
    
    <!-- student == book -->
    {% if books_list %} 
      <table class="table table-striped table-hover" id = "personal-details">
        <thead style="position: sticky;top: 0">
            <!-- header for the table -->
          <tr>
            <th scope="col">Sr. No</th>
            <th scope="col">ISBN No.</th>
            <th scope="col">Name</th>
            <th scope="col">Year</th>
            <th scope="col">Subject</th>
            <th scope="col">Copies</th>
            <th scope="col">Author First Name</th>
            <th scope="col">Author Last Name</th>
          </tr>
        </thead>

        {% for book in books_list %}
        <tbody>
            <!-- the contents to be shown in the table -->
          <tr>

            <th scope="row">{{ loop.index }}</th>
            <td>{{ book.ISBN }}</td>
            <td>{{ book.Name}}</td>
            <td>{{ book.Year }}</td>
            <td>{{ book.Subject }}</td>
            <td>{{ book.copy_count }}</td>
            <td>{{ book.Author_fname }}</td>
            <td>{{ book.Author_lname }}</td>
            
          </tr>
          {% endfor %}
    
        </tbody>
      </table>
      {% else %}
        <p>No Book</p>
      {% endif %}
	
	
	<script>
  	  document.getElementById("search-button").addEventListener("click", function () {
    	var input = document.getElementById("search-input").value.toLowerCase();
    	var rows = document.querySelectorAll("#personal-details tbody tr");

    	for (var i = 0; i < rows.length; i++) {
      		var name = rows[i].querySelector("td:nth-child(3)").textContent.toLowerCase();
      		if (name.includes(input)) {
        	  rows[i].style.display = "";
      		} 
          else {
        	  rows[i].style.display = "none";
      		}
    	}
      });
</script>

<script>
  window.addEventListener("beforeunload", function () {
    document.body.classList.add("animate-out");
  });
</script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4jDKdf19U8gI4ddQ3GYNS7NTKfAdVQSZe" crossorigin="anonymous">
    </script>
</body>
</html>
